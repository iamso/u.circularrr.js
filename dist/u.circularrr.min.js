/*!
 * u.circularrr.js - Version 0.2.1
 * plugin for circular progress
 * Author: Steve Ottoz <so@dev.so>
 * Build date: 2016-08-19
 * Copyright (c) 2016 Steve Ottoz
 * Released under the MIT license
 */
!function(a){"use strict";/^f/.test(typeof define)&&define.amd?define(["ujs"],a):a(/^o/.test(typeof exports)?require("ujs"):ujs)}(function(a){"use strict";function b(b,f){this.el=b,this.$el=a(b),this.options=a.extend({},e,/^o/.test(typeof f)?f:{}),this._defaults=e,this._name=d,this.ns="http://www.w3.org/2000/svg",this.transitionEnd=c(),this.$svg=this.$el.find("."+d),this.$bg=this.$el.find("."+d+"-bg"),this.$progress=this.$el.find("."+d+"-progress"),this.$svg.length||(this.$svg=a(document.createElementNS(this.ns,"svg")),this.$el.append(this.$svg)),this.$bg.length||(this.$bg=a(document.createElementNS(this.ns,"circle")),this.$svg.append(this.$bg)),this.$progress.length||(this.$progress=a(document.createElementNS(this.ns,"circle")),this.$svg.append(this.$progress)),this.$svg.attr("class",d).attr("viewBox","0 0 "+this.options.size+" "+this.options.size).css({transform:"rotate(-90deg)"}),this.$bg.attr("class",d+"-bg").attr("cx",this.options.size/2).attr("cy",this.options.size/2).attr("r",Math.floor((this.options.size-this.options.border)/2)).css({fill:"transparent",opacity:1,stroke:this.options.bg,strokeWidth:this.options.border}),this.$progress.attr("class",d+"-progress").attr("cx",this.options.size/2).attr("cy",this.options.size/2).attr("r",Math.floor((this.options.size-this.options.border)/2)).css({fill:"transparent",opacity:0,stroke:this.options.progress,strokeWidth:this.options.border}),this.init()}function c(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return"transitionend"}var d="circularrr",e={size:40,border:3,bg:"ghostwhite",progress:"lightgreen",transition:"0.8s cubic-bezier(0.19, 1, 0.22, 1)"};b.prototype={init:function(){var a=this;this.radius=this.$progress.attr("r"),this.totalLength=Math.PI*(2*this.radius),this.$progress.css({transition:null,strokeDasharray:this.totalLength,strokeDashoffset:this.totalLength}),setTimeout(function(){a.$progress.css({transition:"stroke-dashoffset "+a.options.transition})},0)},set:function(a){var b=this,c=(100-a)/100*this.totalLength;a>100&&(c=0),0>a&&(c=this.totalLength),this.$progress.css({opacity:1,strokeDashoffset:c}),this.$el.addClass("loading"),a>=100&&this.$progress.one(this.transitionEnd,function(a){var c=new Event(d+"-complete");b.el.dispatchEvent(c),b.$el.removeClass("loading").addClass("loaded")})},reset:function(){this.init(),this.$el.removeClass("loading loaded")}},a.fn[d]=function(c){return this.each(function(){var e=a(this),f=e.data(d);f||(f=new b(this,c),e.data(d,f)),+c===c?f.set(c):"reset"===c&&f.reset()})}});
//# sourceMappingURL=u.circularrr.min.js.map